# üîê –ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ê–¥–º–∏–Ω)

## –û–ø–∏—Å–∞–Ω–∏–µ

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å email –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±–æ–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (Frontend)

### 1. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É.

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –≤—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–µ—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

### 3. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í —Ç–∞–±–ª–∏—Ü–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤ –Ω–∞–π–¥–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á—å–∏ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.

### 4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å"

**–î–µ—Å–∫—Ç–æ–ø –≤–µ—Ä—Å–∏—è:** –ö–Ω–æ–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–ª–æ–Ω–∫–µ "–£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"
**–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è:** –ö–Ω–æ–ø–∫–∞ "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å Email/–ü–∞—Ä–æ–ª—å" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞

### 5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É

–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:

- **Email:** –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π email –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—É—â–∏–π
- **–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:** –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤) –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º

### 6. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å". –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏.

---

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (API)

### Endpoint

```http
PUT /api/admin/users/:userId/credentials
Authorization: Bearer <admin-token>
Content-Type: application/json
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

```json
{
  "email": "newemail@example.com", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "password": "newpassword123" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email

```bash
curl -X PUT http://localhost:5000/api/admin/users/USER_ID/credentials \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"email": "newemail@example.com"}'
```

#### –ò–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å

```bash
curl -X PUT http://localhost:5000/api/admin/users/USER_ID/credentials \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"password": "newpassword123"}'
```

#### –ò–∑–º–µ–Ω–∏—Ç—å email –∏ –ø–∞—Ä–æ–ª—å

```bash
curl -X PUT http://localhost:5000/api/admin/users/USER_ID/credentials \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"email": "newemail@example.com", "password": "newpassword123"}'
```

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "message": "User credentials updated successfully",
  "user": {
    "id": "uuid",
    "email": "newemail@example.com",
    "name": "User Name",
    "phone": "+7 (999) 123-45-67",
    "isAdmin": false,
    "restaurant": {
      "id": "uuid",
      "name": "Restaurant Name",
      "subdomain": "subdomain"
    }
  }
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

#### 400 Bad Request

```json
{
  "error": "Email or password is required"
}
```

```json
{
  "error": "Password must be at least 6 characters"
}
```

```json
{
  "error": "Email already in use"
}
```

#### 403 Forbidden

```json
{
  "error": "Cannot modify admin users"
}
```

#### 404 Not Found

```json
{
  "error": "User not found"
}
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

- ‚úÖ –¢—Ä–µ–±—É–µ—Ç—Å—è JWT —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ middleware `requireAdmin`
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ Email –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt (10 —Ä–∞—É–Ω–¥–æ–≤)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:

```
Admin updating user credentials: { userId: 'xxx', email: 'xxx', hasPassword: true }
User credentials updated successfully: xxx
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend

**–§–∞–π–ª—ã:**

- `backend/src/controllers/admin.controller.js` - –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `updateUserCredentials`
- `backend/src/routes/admin.routes.js` - –†–æ—É—Ç `PUT /users/:userId/credentials`

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

- `bcryptjs` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- `@prisma/client` - –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### Frontend

**–§–∞–π–ª—ã:**

- `frontend/src/pages/AdminPage.jsx` - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**

- `editingUser` - –¢–µ–∫—É—â–∏–π —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `showEditModal` - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `editForm` - –§–æ—Ä–º–∞ —Å email –∏ password

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
# –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω —á–µ—Ä–µ–∑ UI –∏–ª–∏ API
```

### 2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```

### 3. –ò–∑–º–µ–Ω–∏—Ç–µ email

- –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ù–∞–∂–º–∏—Ç–µ "‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å" –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ò–∑–º–µ–Ω–∏—Ç–µ email
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ö–æ–¥ —Å –Ω–æ–≤—ã–º email

- –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º email –∏ —Å—Ç–∞—Ä—ã–º –ø–∞—Ä–æ–ª–µ–º
- –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ

### 5. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å

- –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ö–æ–¥ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

- –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
- –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å ‚úÖ

---

## –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?

‚ùå –ù–µ—Ç, —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∏—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –∑–∞–ª–æ–≥–∏–Ω–µ–Ω?

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã–º –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è –µ–≥–æ JWT —Ç–æ–∫–µ–Ω–∞. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –µ–º—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–æ–π—Ç–∏ —Å –Ω–æ–≤—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

### –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email –∏–ª–∏ —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å?

‚úÖ –î–∞, –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ email, —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—å, –∏–ª–∏ –æ–±–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

### –ß—Ç–æ –µ—Å–ª–∏ email —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

–°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É `Email already in use` –∏ –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è.

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è?

–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.

---

## Changelog

### v1.1.0 (2024)

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π! üéâ**
