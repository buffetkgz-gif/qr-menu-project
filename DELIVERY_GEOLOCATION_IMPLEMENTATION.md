# üìç –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 2025-01-XX  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìù –ó–∞–¥–∞—á–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π:

1. ‚úÖ –ï—Å–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ **–æ—Ç–∫–ª—é—á–µ–Ω–∞** ‚Üí –æ–±—ã—á–Ω—ã–π –∑–∞–∫–∞–∑ –±–µ–∑ —Ñ–æ—Ä–º—ã
2. ‚úÖ –ï—Å–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ **–≤–∫–ª—é—á–µ–Ω–∞** ‚Üí –∫–ª–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –≤ —Ä–∞–¥–∏—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏
4. ‚úÖ –ï—Å–ª–∏ **–≤ –∑–æ–Ω–µ** ‚Üí –∑–∞–∫–∞–∑ –º–æ–∂–Ω–æ –æ—Ñ–æ—Ä–º–∏—Ç—å
5. ‚úÖ –ï—Å–ª–∏ **–≤–Ω–µ –∑–æ–Ω—ã** ‚Üí –∑–∞–∫–∞–∑ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend

#### 1. –û–±–Ω–æ–≤–ª—ë–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–∫–∞–∑–æ–≤

**–§–∞–π–ª:** `backend/src/controllers/orders.controller.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–∫–∏:
  - `customerName` - –∏–º—è –∫–ª–∏–µ–Ω—Ç–∞
  - `customerPhone` - —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞
  - `customerEmail` - email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - `deliveryAddress` - –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏
  - `deliveryLatitude` - GPS —à–∏—Ä–æ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞
  - `deliveryLongitude` - GPS –¥–æ–ª–≥–æ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–ö–æ–¥:**

```javascript
const orderData = {
  orderNumber,
  restaurantId,
  items: JSON.stringify(items),
  total: parseFloat(total),
  customerName: customerName || "–ö–ª–∏–µ–Ω—Ç",
  customerPhone: customerPhone || "–ù–µ —É–∫–∞–∑–∞–Ω",
  deliveryAddress,
  deliveryLatitude: parseFloat(deliveryLatitude),
  deliveryLongitude: parseFloat(deliveryLongitude),
};
```

#### 2. API –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

**–§–∞–π–ª:** `backend/src/controllers/geolocation.controller.js`

**–£–∂–µ –≥–æ—Ç–æ–≤:**

- ‚úÖ `/api/geolocation/check-delivery` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –§–æ—Ä–º—É–ª–∞ Haversine –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `deliveryEnabled` –∏ `deliveryRadius`

**–û—Ç–≤–µ—Ç API:**

```json
{
  "restaurantId": "clx123",
  "restaurantName": "–°—É—à–∏ –ë–∞—Ä",
  "distance": 2.5,
  "deliveryRadius": 5,
  "isInDeliveryZone": true,
  "deliveryAvailable": true,
  "deliveryFee": 200,
  "message": "–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞"
}
```

#### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª:** `backend/prisma/schema.prisma`

**–ü–æ–ª—è —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã:**

```prisma
model Restaurant {
  latitude          Float?
  longitude         Float?
  deliveryRadius    Float?
  deliveryEnabled   Boolean   @default(false)
  deliveryFee       Float?
}

model Order {
  customerName      String
  customerPhone     String
  customerEmail     String?
  deliveryAddress   String?
  deliveryLatitude  Float?
  deliveryLongitude Float?
}
```

---

### Frontend

#### 1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–æ—Ä–∑–∏–Ω—ã

**–§–∞–π–ª:** `frontend/src/components/Cart.jsx`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**

##### –°–æ—Å—Ç–æ—è–Ω–∏—è:

```javascript
const [customerName, setCustomerName] = useState("");
const [customerPhone, setCustomerPhone] = useState("");
const [deliveryAddress, setDeliveryAddress] = useState("");
const [userLocation, setUserLocation] = useState(null);
const [deliveryCheck, setDeliveryCheck] = useState(null);
const [isCheckingLocation, setIsCheckingLocation] = useState(false);
```

##### –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è:

```javascript
const handleGetLocation = () => {
  navigator.geolocation.getCurrentPosition(
    async (position) => {
      const { latitude, longitude } = position.coords;
      setUserLocation({ latitude, longitude });

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
      const response = await api.get("/geolocation/check-delivery", {
        params: { restaurantId: restaurant.id, latitude, longitude },
      });

      setDeliveryCheck(response.data);
    },
    (error) => {
      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
      alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ");
    }
  );
};
```

##### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏:

```javascript
if (restaurant.deliveryEnabled) {
  if (!customerName || !customerPhone || !deliveryAddress) {
    alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");
    return;
  }
  if (!userLocation) {
    alert("–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –≤–∞—à–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ");
    return;
  }
  if (!deliveryCheck?.deliveryAvailable) {
    alert("–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≤–∞—à–µ–º—É –∞–¥—Ä–µ—Å—É –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞");
    return;
  }
}
```

##### UI —Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:

```jsx
{
  restaurant.deliveryEnabled && (
    <div className="mb-4 space-y-3">
      <h3>–î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏:</h3>

      <input
        type="text"
        placeholder="–í–∞—à–µ –∏–º—è *"
        value={customerName}
        onChange={(e) => setCustomerName(e.target.value)}
      />

      <input
        type="tel"
        placeholder="–í–∞—à —Ç–µ–ª–µ—Ñ–æ–Ω *"
        value={customerPhone}
        onChange={(e) => setCustomerPhone(e.target.value)}
      />

      <input
        type="text"
        placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *"
        value={deliveryAddress}
        onChange={(e) => setDeliveryAddress(e.target.value)}
      />

      <button onClick={handleGetLocation}>
        üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
      </button>

      {/* –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ */}
      {deliveryCheck && (
        <div className={deliveryCheck.deliveryAvailable ? "success" : "error"}>
          {deliveryCheck.message}
          <p>–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: {deliveryCheck.distance} –∫–º</p>
        </div>
      )}
    </div>
  );
}
```

##### –û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ WhatsApp:

```javascript
let message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ú–æ–π –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞: ${orderNumber}\n\n`;

if (restaurant.deliveryEnabled) {
  message += `üë§ –ò–º—è: ${customerName}\n`;
  message += `üì± –¢–µ–ª–µ—Ñ–æ–Ω: ${customerPhone}\n`;
  message += `üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: ${deliveryAddress}\n`;
  message += `üöó –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: ${deliveryCheck.distance} –∫–º\n\n`;
}

message += `–•–æ—á—É —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑:\n\n${orderText}\n\n–ò—Ç–æ–≥–æ: ${total} ${currency}`;

if (restaurant.deliveryEnabled && restaurant.deliveryFee) {
  message += `\n–î–æ—Å—Ç–∞–≤–∫–∞: ${restaurant.deliveryFee} ${currency}`;
}
```

---

## üéØ –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –î–æ—Å—Ç–∞–≤–∫–∞ –û–¢–ö–õ–Æ–ß–ï–ù–ê

```
–ö–ª–∏–µ–Ω—Ç ‚Üí –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É ‚Üí
–í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ ‚Üí "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" ‚Üí WhatsApp
```

**–§–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è.**

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ—Å—Ç–∞–≤–∫–∞ –í–ö–õ–Æ–ß–ï–ù–ê

```
–ö–ª–∏–µ–Ω—Ç ‚Üí –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–≤–∞—Ä—ã ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ—Ä–∑–∏–Ω—É ‚Üí
–í–∏–¥–∏—Ç –§–û–†–ú–£ –î–û–°–¢–ê–í–ö–ò:
  ‚îú‚îÄ [–ò–º—è]
  ‚îú‚îÄ [–¢–µ–ª–µ—Ñ–æ–Ω]
  ‚îú‚îÄ [–ê–¥—Ä–µ—Å]
  ‚îî‚îÄ [üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ]
      ‚Üì
–ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç GPS ‚Üí
–ü–æ–ª—É—á–µ–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí API –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Üí
  ‚îú‚îÄ ‚úÖ –í –ó–û–ù–ï ‚Üí "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" (–∞–∫—Ç–∏–≤–Ω–∞) ‚Üí WhatsApp
  ‚îî‚îÄ ‚ùå –í–ù–ï –ó–û–ù–´ ‚Üí "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞)
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ö–ª–∏–µ–Ω—Ç –≤ –∑–æ–Ω–µ –¥–æ—Å—Ç–∞–≤–∫–∏

```
‚úÖ –î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞
–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 2.5 –∫–º (–º–∞–∫—Å. 5 –∫–º)
–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: 200 ‚ÇΩ
```

–ö–Ω–æ–ø–∫–∞ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" **–∞–∫—Ç–∏–≤–Ω–∞**.

---

### ‚ùå –ö–ª–∏–µ–Ω—Ç –≤–Ω–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏

```
‚ùå –í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏ (5 –∫–º)
–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ: 7.2 –∫–º (–º–∞–∫—Å. 5 –∫–º)
```

–ö–Ω–æ–ø–∫–∞ "–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" **–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞**.

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ—Å—Ç–æ—Ä–∞–Ω

1. –í–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `http://localhost:5173/admin`
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞**
3. –í–∫–ª—é—á–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É (–≥–∞–ª–æ—á–∫–∞)
4. –£–∫–∞–∑–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ú–æ—Å–∫–≤–∞: `55.751244, 37.618423`)
5. –†–∞–¥–∏—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏: `5` –∫–º
6. –°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: `200` ‚ÇΩ
7. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

### –®–∞–≥ 2: –¢–µ—Å—Ç –∫–ª–∏–µ–Ω—Ç–∞

1. –û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é: `http://localhost:5173/menu/–≤–∞—à-subdomain`
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª—é–¥ –≤ –∫–æ—Ä–∑–∏–Ω—É
3. –û—Ç–∫—Ä—ã—Ç—å –∫–æ—Ä–∑–∏–Ω—É (–∫–Ω–æ–ø–∫–∞ —Å–ø—Ä–∞–≤–∞ –≤–Ω–∏–∑—É)
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏? ‚úÖ
5. –ó–∞–ø–æ–ª–Ω–∏—Ç—å: –∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å
6. –ù–∞–∂–∞—Ç—å "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ"
7. –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
8. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ø–æ—è–≤–∏–ª–æ—Å—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ (–≤ –∑–æ–Ω–µ / –≤–Ω–µ –∑–æ–Ω—ã)?
9. –ï—Å–ª–∏ –≤ –∑–æ–Ω–µ ‚Üí –æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
10. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ WhatsApp

### –®–∞–≥ 3: –¢–µ—Å—Ç API

```powershell
# –ó–∞–º–µ–Ω–∏—Ç—å YOUR_RESTAURANT_ID –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID
curl "http://localhost:5000/api/geolocation/check-delivery?restaurantId=YOUR_RESTAURANT_ID&latitude=55.7558&longitude=37.6173"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**

```json
{
  "restaurantId": "...",
  "restaurantName": "–°—É—à–∏ –ë–∞—Ä",
  "distance": 2.5,
  "deliveryRadius": 5,
  "isInDeliveryZone": true,
  "deliveryAvailable": true,
  "deliveryFee": 200,
  "message": "–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞"
}
```

---

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:

- ‚úÖ `backend/src/controllers/orders.controller.js` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ `backend/src/controllers/geolocation.controller.js` - —É–∂–µ –±—ã–ª –≥–æ—Ç–æ–≤
- ‚úÖ `backend/prisma/schema.prisma` - –ø–æ–ª—è —É–∂–µ –±—ã–ª–∏

### Frontend:

- ‚úÖ `frontend/src/components/Cart.jsx` - —Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ + –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

- ‚úÖ `GEOLOCATION_STATUS.md` - –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ `GEOLOCATION_README.md` - –æ–±–Ω–æ–≤–ª—ë–Ω
- ‚úÖ `DELIVERY_GEOLOCATION_IMPLEMENTATION.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–Ω–æ–≤—ã–π)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞

### –í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (`/admin/settings`):

| –ü–æ–ª–µ                     | –û–ø–∏—Å–∞–Ω–∏–µ                | –ü—Ä–∏–º–µ—Ä      |
| ------------------------ | ----------------------- | ----------- |
| **–í–∫–ª—é—á–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É**    | –ì–∞–ª–æ—á–∫–∞ –≤–∫–ª/–≤—ã–∫–ª        | ‚úÖ          |
| **–®–∏—Ä–æ—Ç–∞**               | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞    | `55.751244` |
| **–î–æ–ª–≥–æ—Ç–∞**              | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞    | `37.618423` |
| **–†–∞–¥–∏—É—Å –¥–æ—Å—Ç–∞–≤–∫–∏ (–∫–º)** | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ | `5`         |
| **–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏**   | –¶–µ–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∏           | `200`       |

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–æ—Ä–º—É–ª–∞ Haversine

–†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ç–æ—á–∫–∞–º–∏ –Ω–∞ —Å—Ñ–µ—Ä–µ:

```javascript
const calculateDistance = (lat1, lon1, lat2, lon2) => {
  const R = 6371; // –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–º
  const dLat = ((lat2 - lat1) * Math.PI) / 180;
  const dLon = ((lon2 - lon1) * Math.PI) / 180;

  const a =
    Math.sin(dLat / 2) * Math.sin(dLat / 2) +
    Math.cos((lat1 * Math.PI) / 180) *
      Math.cos((lat2 * Math.PI) / 180) *
      Math.sin(dLon / 2) *
      Math.sin(dLon / 2);

  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return R * c; // –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–º
};
```

### Navigator Geolocation API

```javascript
navigator.geolocation.getCurrentPosition(
  (position) => {
    const { latitude, longitude } = position.coords;
    // –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
  },
  (error) => {
    // –û—à–∏–±–∫–∞ (PERMISSION_DENIED, POSITION_UNAVAILABLE, TIMEOUT)
  },
  {
    enableHighAccuracy: true, // –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
    timeout: 10000, // 10 —Å–µ–∫—É–Ω–¥
    maximumAge: 0, // –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à
  }
);
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **HTTPS —Ç—Ä–µ–±—É–µ—Ç—Å—è** –≤ production (localhost —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ HTTPS)
2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏** - –∫–ª–∏–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–¢–æ—á–Ω–æ—Å—Ç—å GPS** - ¬±10-50 –º–µ—Ç—Ä–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
4. **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ "–ø–æ –ø—Ä—è–º–æ–π"** - —Ñ–æ—Ä–º—É–ª–∞ Haversine –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –¥–æ—Ä–æ–≥–∏
5. **–§–æ—Ä–º–∞—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç** - Decimal Degrees (`55.751244`, –Ω–µ `55¬∞45'04.5"`)
6. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–∞–∑–∞** - –µ—Å–ª–∏ `deliveryAvailable = false`, –∫–Ω–æ–ø–∫–∞ disabled

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è

### –§–∞–∑–∞ 2:

- [ ] –ö–∞—Ä—Ç–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- [ ] Reverse Geocoding (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã ‚Üí –∞–¥—Ä–µ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ –∫–ª–∏–µ–Ω—Ç–∞ ("–î–æ–º", "–†–∞–±–æ—Ç–∞")
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∞–¥—Ä–µ—Å–∞–º

### –§–∞–∑–∞ 3:

- [ ] –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (–ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é)
- [ ] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä—Ç–∞–º–∏ (Google / Yandex)
- [ ] –ö—É—Ä—å–µ—Ä—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å GPS —Ç—Ä–µ–∫–∫–∏–Ω–≥–æ–º

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞:

- [ ] –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –∑–∞–∫–∞–∑–æ–≤
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è–º
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–¥–∏—É—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] Backend: API –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏
- [x] Backend: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫–ª–∏–µ–Ω—Ç–∞ –≤ –∑–∞–∫–∞–∑–µ
- [x] Frontend: —Ñ–æ—Ä–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ
- [x] Frontend: –∑–∞–ø—Ä–æ—Å GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- [x] Frontend: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
- [x] Frontend: –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (–≤ –∑–æ–Ω–µ / –≤–Ω–µ –∑–æ–Ω—ã)
- [x] Frontend: –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –µ—Å–ª–∏ –≤–Ω–µ –∑–æ–Ω—ã
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
- [x] –û–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ WhatsApp
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ—Å—Ç–∞–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞ (`deliveryEnabled = true`)

---

**‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –Ω–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞, –∞ –¥–ª—è **–ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–æ–Ω—ã –¥–æ—Å—Ç–∞–≤–∫–∏** –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.
